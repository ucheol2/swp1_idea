<style>
body {
  background: url("https://s3-ap-northeast-1.amazonaws.com/danspot-bucket/Coding.jpg") no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
}
</style>

<div class="center white-text" style="background-color: rgba(0,0,0,0.7); padding: 1em; margin-top: 4em;">
  <h1>아이디어 게시판</h1>
  <a href="/ideas/new" class="waves-effect btn-flat white"><b>아이디어 등록</b></a>
</div>

<ul class="collection">
  <% @ideas.each do |item| %>
    <li class="collection-item avatar">
      <a href="/ideas/detail/<%= item.id %>" class="black-text">
        <% if item.photos.first %>
          <img src="<%= item.photos.first.img.thumb.url %>" alt="" class="circle">
        <% else %>
          <i class="material-icons circle red">image</i>
        <% end %>
        <span class="title"><b><%= item.name %></b></span>
        <p><%= item.summary%> <br>
           Second Line
        </p>
        <a data-idea="<%= item.id %>" href="#!" class="favorite_btn secondary-content">
          <% if item.favortie_users.include? current_user %>
            <i class="material-icons red-text">star</i>
          <% else %>
            <i class="material-icons red-text">star_border</i>
          <% end %>
        </a>
      </a>
    </li>
  <% end %>
</ul>

<script>
$(document).ready(function(){
  $('.favorite_btn').click(function(event){
    event.preventDefault();
    star = $(this)
    $.ajax({
      url: "/my/favorite",
      dataType: "json",
      data: {
        idea_id : star.data('idea')
      },
      success: function(data){
        if (data) {
          star.find('i').text('star');
        } else {
          star.find('i').text('star_border');
        };
      }
    });
  });
});
</script>